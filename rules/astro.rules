rule "Controllo luci 30min prima del tramonto e al sorgere" 
when
    Item SunElevation changed
then
    if(now.getHour > 12 && SunElevation.state < -3 && SwitchBinary1_Luce_Portone_ZW13.state != ON)
    {
       SwitchBinary1_Luce_Portone_ZW13.sendCommand(ON)
       val telegramAction = getActions("telegram","telegram:telegramBot:Telegram_Bot")
       telegramAction.sendTelegram("Luce portone ACCESA!")

//       logInfo("Luce accesa")
    }
    if(now.getHour < 12 && SunElevation.state > -3 && SwitchBinary1_Luce_Portone_ZW13.state != OFF)
    {
       SwitchBinary1_Luce_Portone_ZW13.sendCommand(OFF)
       val telegramAction = getActions("telegram","telegram:telegramBot:Telegram_Bot")
       telegramAction.sendTelegram("Luce portone SPENTA!")
    }
    
end


rule "Accendi luce Garage dopo il tramonto Contatto"
when
    Item SensorBinary1_Serranda_Garage_ZW16 changed from OFF to ON
    
then
    if(SunElevation.state < 20 && SwitchBinary2_Luce_Garage_ZW15.state != ON)
    {
       SwitchBinary2_Luce_Garage_ZW15.sendCommand(ON)
    }
end 
